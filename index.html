<!DOCTYPE html>
<html lang="uk" class="bg">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sopilka Tab Creator</title>
    <link rel="stylesheet" href="./styles/main.css">
    <link rel="stylesheet" href="./styles/popups.css">
    <link rel="stylesheet" href="./styles/menu.css">
    <link rel="icon" type="image/x-icon" href="./img/icon.png">
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js" type="text/javascript"></script>
</head>

<body>
    <div id="develop">
        <h2>На даний момент веб-додаток перебуває в активній фазі розробки і тестування нової версії. Деякі функції
            можуть не працювати або працювати некоректно. Рекомендую скористатися попередньою версією. Вибачте за
            тимчасові незручнсті.</h2><a href="https://antoninazz.github.io/SopilkaTabCreator/index0.html">Перейти до попередньої версії</a>
    </div>
    <div class="interview popup">
        <img src="./img/cancel-icon.svg" alt="cancel" class="cancel-icon" onclick="closeInterview()">
        <div class="icon"><img src="./img/quiz.svg" class="quiz-icon"></div>
        <header>Допоможи розробнику – залиш відгук!</header>
        <p>Дякую, що користуєтесь цією розробкою! Будь ласка, приділіть кілька хвилин часу та допоможіть автору провести
            дослідження для дипломної роботи. Опитування не займе більше 5 хвилин, але є дуже важливим для мене!</p>
        <a class="custom-button" href="https://forms.gle/9mYXo6C3LjUgV6cJ7" target="_blank" rel="noopener"
            onclick="closeInterview()">Пройти опитування</a>
    </div>
    <div class="overlay" onclick="closeInterview()"></div>
    <div class="hamburger">
        <input id="menuToggle" type="checkbox" />
        <label class="menuBtn" for="menuToggle"><span></span></label>
        <div class="sidebar">
            <img src="./img/avatar.svg" alt="Profile Picture" id="profilePhoto">
            <div id="tglogout" class="invisible"></div>
            <script async src="https://telegram.org/js/telegram-widget.js?21" data-telegram-login="SopilkaTabCreatorBot"
                data-size="medium" data-onauth="onTelegramAuth(user)" data-request-access="write"></script>
            <script type="text/javascript">
                function onTelegramAuth(user) {
                    if (user.photo_url) {
                        localStorage.setItem('profilePhoto', user.photo_url);
                    }
                    localStorage.setItem("chat_id", user.id);
                    localStorage.setItem('token', '5854252894:AAH4UxPPUZiDTy-GqZ5UzNkDQY-IFZdekuw');
                    localStorage.setItem("tglogout", `<p>Ви увійшли як <em>${user.first_name} ${user.last_name ? user.last_name : ''}</em></p><p>Тепер при збереженні аплікатурних схем вони автоматично надходитимуть на ваш <em>telegram</em>.</p><input type="button" id="btnUnsubscribe" value="Не надсилати мені повідомлення" onclick="unsubscribe()">`)
                    let welcomeMessage = `Вітаю, ${user.first_name} ${user.last_name ? user.last_name : ''}!%0AВи успішно підключили Sopilka Tab Creator Bot. Тепер при збереженні результатів роботи на сайті Ваші аплікатурні схеми автоматично дублюватимуться у цей чат.`;
                    let url = `https://api.telegram.org/bot${localStorage.getItem("token")}/sendMessage?chat_id=${localStorage.getItem("chat_id")}&text=${welcomeMessage}`;
                    let request = new XMLHttpRequest();
                    request.open("GET", url, true);
                    request.send();
                    document.getElementById("telegram-login-SopilkaTabCreatorBot").setAttribute('class', 'invisible');
                    document.getElementById("tglogout").innerHTML = localStorage.getItem("tglogout");
                    document.getElementById("tglogout").setAttribute('class', '');
                }
            </script>
            <div class="menu">
                <label for="settings" class="menuItem"><img src="./img/settings.svg" alt="settings">Налаштування</label>
                <label for="info" class="menuItem"><img src="./img/info.svg" alt="info">Довідка</label>
                <a href="https://forms.gle/9mYXo6C3LjUgV6cJ7" class="menuItem" id="feedback" target="_blank"><img
                        src="./img/feedback.svg" alt="feedback">Залишити відгук</a>
                <a href="https://forms.gle/vk42n39HKRfvnaBK9" class="menuItem" id="bugreport" target="_blank"><img
                        src="./img/bugreport.svg" alt="bugreport">Повідомити про баг</a>
            </div>
        </div>
        <input type="checkbox" id="info">
        <div class="info popup">
            <label for="info"><img src="./img/cancel-icon.svg" alt="cancel" class="cancel-icon"></label>
        </div>
        <input type="checkbox" id="settings">
        <div class="settings popup">
            <label for="settings"><img src="./img/cancel-icon.svg" alt="cancel" class="cancel-icon"></label>
            <div class="setting">
                <label for="lang">Мова</label>
                <select name="lang" id="lang" onchange="changeLang(this.value)"></select>
            </div>
            <div class="setting">
                <label for="spacing">Проміжки</label>
                <input id="spacing" type="range" min="0" max="9" value="4" oninput="changeSpacing(this)">
            </div>
            <div class="setting">
                <label for="whiteBg">Біле тло</label>
                <label class="switch">
                    <input type="checkbox" id="whiteBg" onchange="changeBg(this.checked)">
                    <span class="slider round"></span>
                </label>
            </div>
            <div class="setting">
                <label for="showNotes">Показувати ноти</label>
                <label class="switch">
                    <input type="checkbox" id="showNotes" onchange="showNotes(this.checked)" checked>
                    <span class="slider round"></span>
                </label>
            </div>
            <div class="setting">
                <label for="duplicateToTg">Завжди зберігати у telegram</label>
                <label class="switch">
                    <input type="checkbox" id="duplicateToTg" onchange="duplicateToTg(this.checked)">
                    <span class="slider round"></span>
                </label>
            </div>
        </div>
        <div class="overlay" onclick="closePopup()"></div>
    </div>
    <header>
        <h1 lang="en">Sopilka Tab Creator</h1>
        <h4 id="slogan">Грати на сопілці – легко, навіть без знання нотної грамоти!</h4>
    </header>
    <main>
        <p id="description">Для <em>десятиотворної хроматичної сопілки</em>. Використовуйте <kbd>#</kbd> після ноти для
            позначення дієз та великі літери, <kbd>+</kbd> і <kbd>++</kbd> для позначення нот вищих октав. Для
            групування нот використовуйте пробіли і переходи на новий рядок, а заголовки, підзаголовки і коментарі можна
            додавати, почавши новий рядок з <kbd>---</kbd>, <kbd>--</kbd> або <kbd>-</kbd> відповідно. Успіхів!</p>
        <div class="options">
            <div>
                <label for="tune">Мелодія</label>
                <select name="tune" id="tune" onchange="changeTune()"></select>
            </div>
            <div id="sopilkaTypeChanger">
                <label for="sopilkaType">Сопілка</label>
                <select name="sopilkaType" id="sopilkaType" onchange="changeSopilkaType(this.value)"></select>
            </div>
        </div>
        <textarea id="notes" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"></textarea>
        <div id="tabs"></div>
        <div id="saving">
            <input type="button" id="btnSave" value="Зберегти" onclick="saveResults()">
            <input type="radio" id="pdf" name="save" checked>
            <input type="radio" id="png" name="save">
            <input type="radio" id="tg" name="save">
            <p id="chooseFormat">Зберегти як <label for="pdf">PDF</label> <label for="png">PNG</label> <label
                    for="tg">TG</label></p>
        </div>
    </main>
    <footer lang="en">Sopilka Tab Creator by <a href="https://youtube.com/c/MaggieFilms" target="_blank">Maggie
            Films</a> <em>☚</em> tutorials & tunes</footer>
    <script src="main.js"></script>
</body>

</html>
